<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title> Dashboard</title>
    <meta name="description" content="8-Puch Tablet Press Dashboard">

    <!-- Favicon -->
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">

    <!-- NPM package includes -->
    <link href="/font/css/all.css" rel="stylesheet">
    <script src="/charts/Chart.bundle.min.js"></script>
    <script src="/charts/plugin/chartjs-plugin-zoom.min.js"></script>
    <script src="/plugin/hammer.min.js"></script>
    <script src="/guage/guage.min.js"></script>
    <link  href="/css/tailwind.min.css" rel="stylesheet">
    <script src="/env/env.js"></script>

    <!-- BackGround Info -->
    <style>
        .bg-black-alt {
            background: #191919;
        }

        .text-black-alt {
            color: #191919; }

        .border-black-alt {
            border-color: #191919;
        }
    </style>

    <!-- carousel CSS -->
    <style>
        .carousel-open:checked+.carousel-item {
            position: static;
            opacity: 100;
        }

        .carousel-item {
            -webkit-transition: opacity 0s ease-out;
            transition: opacity 0s ease-out;
        }

        #carousel-1:checked~.control-1,
        #carousel-2:checked~.control-2,
        #carousel-3:checked~.control-3 {
            display: block;
        }

        .carousel-indicators {
            list-style: none;
            margin: 0;
            padding: 0;
            position: absolute;
            bottom: 2%;
            left: 0;
            right: 0;
            text-align: center;
            z-index: 10;
        }

        #carousel-1:checked~.control-1~.carousel-indicators li:nth-child(1) .carousel-bullet,
        #carousel-2:checked~.control-2~.carousel-indicators li:nth-child(2) .carousel-bullet,
        #carousel-3:checked~.control-3~.carousel-indicators li:nth-child(3) .carousel-bullet {
            color: #2b6cb0;
            /*Set to match the Tailwind colour you want the active one to be */
        }
    </style>

</head>
<!-- BODY -->

<body class="bg-gray-300 font-sans leading-normal tracking-normal" onload="startfetching()">

    <!-- NAVIGATION BAR -->
    <nav id="header" class="bg-transparent fixed w-full z-10 bottom-0 shadow">
        <div class="w-full  mx-auto flex flex-wrap items-center mt-0 pt-0 pb-3 md:pb-0">
            <div class="w-full select-none px-5 flex-grow lg:flex lg:items-center lg:w-auto hidden lg:block mt-2 lg:mt-0 bg-purple-300 md:text-center z-20" id="nav-content">

                <!-- HTML Pages -->
                <ul class="list-reset uppercase text-md lg:flex flex-1 items-center px-4 md:px-0">
                    <!-- Dashboard -->
                    <li class="mr-6 my-2 md:my-0">
                        <a href="/dashboard" class="block py-1 md:py-3 pl-1 align-middle text-gray-800 no-underline hover:text-gray-100 border-b-2 border-gray-400  hover:border-blue-400">
                            <i class="fas fa-digital-tachograph fa-fw mr-3"></i>
                            <span class="pb-3 md:pb-0"> Dashboard </span>
                        </a>
                    </li>
                </ul>

                <!-- Time  -->
                <div class="flex relative pl-4 inline-block float-right select-none">
                    <div id="modbus" class="align-middle text-l text-gray-900">Connecting..</div>
                    <i class="align-middle cursor-pointer text-xl pt-1 text-gray-900 pl-3 px-2 fa fa-retweet"></i>
                </div>
                <div class="flex relative pl-4 inline-block float-right select-none">
                    <div id="time" class="align-middle text-l text-gray-900">Loading..</div>
                    <i class="align-middle cursor-pointer text-xl pt-1 text-gray-900 pl-3 px-2 fas fa-sign-out-alt" onclick="logout()"></i>
                </div>

            </div>
    </nav>

    <!--Container-->
    <div class="w-full pb-10">
        <div class="w-full md:flex xl:flex px-0 md:px-0 md:mt-2 mb-2 text-gray-800 leading-normal" style="height:80vh;">

            <!-- Metric Cards -->
            <!-- <div class="flex-wrap select-none md:w-1/5 xl:w-1/5"> -->

                <!-- Production Status Metric Card-->
                <!-- <div class="w-full p-3">
                    <div class="bg-white border border-gray-500 rounded shadow p-2">
                        <div class="flex flex-row items-center">
                            <div class="flex-shrink px-4">
                                <div id="colorr" class="rounded p-3 text-red-800"><i
                                        class="fas fa-cog fa-pulse fa-2x fa-fw fa-inverse"></i></div>
                            </div>
                            <div class="flex-1 pt-3 text-right md:text-center pr-3">
                                <h5 class="font-bold uppercase text-gray-900">MACHINE</h5>
                                <h3 id="machine_status" class="font-bold text-4xl pb-3 text-gray-900">
                                </h3>
                            </div>
                        </div>
                    </div>
                </div> -->

                <!-- Machine Uptime Metric Card-->
                <!-- <div class="w-full p-3">
                    <div class="bg-white border border-gray-500 rounded shadow p-2">
                        <div class="flex flex-row items-center">
                            <div class="flex-1 pt-3 text-center pr-3">
                                <h5 class="font-bold text-xl uppercase text-gray-900">Start time:<br>
                                    <a id="start_time" class="font-bold text-2xl text-gray-500">
                                    </a>
                                </h5>
                            </div>
                        </div>
                    </div>
                </div> -->

                <!-- Ellapsed time Metric Card-->
                <!-- <div class="w-full p-3">
                    <div class="bg-white border border-gray-500 rounded shadow p-2">
                        <div class="flex flex-row items-center">
                            <div class="flex-1 pt-3 text-center pr-3">
                                <h5 class="font-bold text-xl uppercase text-gray-900">Ellapsed time:<br>
                                    <a id="ellapsed_time" class="font-bold text-2xl text-gray-500">
                                    </a>
                                </h5>
                            </div>
                        </div>
                    </div>
                </div> -->

                <!--Production Count Metric Card-->
                <!-- <div class="w-full p-3">
                    <div class="bg-white border border-gray-500 rounded shadow p-2">
                        <div class="flex flex-row items-center">
                            <div class="flex-1 pt-3 text-center pr-3">
                                <h5 class="font-bold text-xl uppercase text-gray-900">Production count:</h5>
                                <h3 id="production_count" class="font-bold text-2xl text-gray-500">
                                </h3>
                            </div>
                        </div>
                    </div>
                </div> -->

                <!--Delay Time Metric Card-->
                <!-- <div class="w-full p-3">
                    <div class="bg-white border border-gray-500 rounded shadow p-2">
                        <div class="flex flex-row items-center">
                            <div class="flex-1 pt-3 text-center pr-3">
                                <h5 class="font-bold text-xl uppercase text-gray-900">Delay Time:</h5>
                                <h3 id="delay_time" class="font-bold text-2xl text-gray-500">0
                                </h3>
                            </div>
                        </div>
                    </div>
                </div> -->

                <!--Rejection Count Metric Card-->
                <!-- <div class="w-full p-3">
                    <div class="bg-white border border-gray-500 rounded shadow p-2">
                        <div class="flex flex-row items-center">
                            <div class="flex-1 pt-3 text-center pr-3">
                                <h5 class="font-bold text-xl uppercase text-gray-900">Rejection count:</h5>
                                <h3 id="count_metric" class="font-bold text-2xl text-gray-500">0
                                </h3>
                            </div>
                        </div>
                    </div>
                </div> -->

                <!--Production Per Hour Count Metric Card-->
                <!-- <div class="w-full p-3">
                    <div class="bg-white border border-gray-500 rounded shadow p-2">
                        <div class="flex flex-row items-center">
                            <div class="flex-1 pt-3 text-center pr-3">
                                <h5 class="font-bold text-xl uppercase text-gray-900">Production Per Hour:</h5>
                                <h3 id="production_per_hour" class="font-bold text-2xl text-gray-500">
                                </h3>
                            </div>
                        </div>
                    </div>
                </div> -->

                <!-- RPM Metric Card-->
                <!-- <div class="w-full p-3">
                    <div class="bg-white border border-gray-500 rounded shadow p-2">
                        <div class="flex flex-row items-center">
                            <div class="flex-1 pt-3 text-center pr-3">
                                <h5 class="font-bold text-xl uppercase text-gray-900">Turret RPM: <a id="rpm_metric"> 100</a></h5>
                            </div>
                        </div>
                        <div id="chart_div" class="w-full p-5 pl-10 "></div>
                    </div>
                </div> -->

                <!--Divider-->
                <!-- <hr class="border-b-2 border-gray-600 my-4 mx-4">
            </div> -->

            <!-- Graphs and Tables -->
            <!-- <div class="flex select-none flex-wrap md:w-4/5 xl:w-4/5"> -->
            <div class="flex select-none flex-wrap">

                <!-- Carousel HTML -->
                <div class="carousel w-full p-3">

                    <!-- Overview Slide - 1 -->
                    <div class="carousel-inner relative overflow-hidden w-full">
                        <input class="carousel-open" type="radio" id="carousel-1" name="carousel" aria-hidden="true"
                            hidden="" checked="checked">
                        <div class="carousel-item absolute bg-gray-100 border overflow-y-auto border-gray-800 rounded shadow"
                            style="height:90vh;">
                            <div class="flex flex-wrap w-full text-center">

                                <!-- Machine Toggle Card-->
                                <div class="w-full md:w-1/2 xl:w-1/2 p-3">
                                    <div class="bg-white border border-gray-500 rounded shadow p-2">
                                        <div class="flex flex-wrap flex-row items-center">
                                            <div class="flex-shrink p-2">
                                                <div class="rounded p-3 bg-blue-600"><i class="fas fa-cog fa-3x fa-fw fa-inverse" onclick="location.reload()"></i>
                                                </div>
                                            </div>
                                            <div class="flex-1 pr-2">
                                                <h5 class="font-bold text-right text-4xl text-gray-900">Induction Machine [ 8 Index ] 
                                                </h5>
                                            </div>
                                        </div>
                                        <div class="flex-1 text-right py-3 pr-3">
                                            <h5 class="font-bold uppercase text-2xl pb-5 text-gray-900"> Status:
                                                <a id="machine_status_metric" class="font-bold text-2xl pl-2 items-center text-gray-800">OFF
                                                </a>
                                            </h5>
                                            <h4 class="py-3">
                                                <button id="searchbatch"
                                                    class="bg-blue-100 uppercase text-xl hover:bg-blue-500 text-gray-800 font-semibold hover:text-white py-4 px-10  border border-blue-500 hover:border-transparent rounded"
                                                    onclick="Home()">
                                                    Home
                                                </button>
                                                <button id="searchbatch"
                                                    class="bg-green-500 uppercase text-xl hover:bg-green-500 text-gray-800 font-semibold hover:text-white py-4 px-10 ml-5 border border-green-500 hover:border-transparent rounded"
                                                    onclick="Delay()">
                                                    START
                                                </button>
                                                <button id="searchbatch"
                                                    class="bg-red-500 uppercase text-xl hover:bg-red-500 text-gray-800 font-semibold hover:text-white py-4 px-10 ml-5 border border-red-500 hover:border-transparent rounded"
                                                    onclick="Stop()">
                                                    STOP
                                                </button>
                                            </h4>
                                
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- Delay Time Card-->
                                <div class="w-full md:w-1/2 xl:w-1/2 p-3">
                                    <div class="bg-white border border-gray-500 rounded shadow p-2">
                                        <div class="flex items-center">
                                            <div class="p-2">
                                                <div class="rounded p-3 bg-blue-600"><i class="fas fa-cog fa-3x fa-fw fa-inverse"></i>
                                                </div>
                                            </div>
                                            <div class="flex-1 p-2">
                                                <h5 class="font-bold text-right text-4xl text-gray-900">Heating Time: 
                                                    <a id="heating_time_metric" class="font-bold text-4xl pl-2 items-center text-gray-800">0 
                                                    </a> sec
                                                </h5>
                                            </div>
                                        </div>
                                
                                        <div class=" text-right pb-2 pr-3">
                                            <h4 class="py-2">
                                                <button 
                                                    class="bg-red-500 uppercase text-xl hover:bg-red-500 text-gray-800 font-semibold hover:text-white py-3 px-20 ml-5 border border-red-500 hover:border-transparent rounded"
                                                    onclick="decrement()">
                                                    -
                                                </button>
                                                <button 
                                                    class="bg-green-500 uppercase text-xl hover:bg-green-500 text-gray-800 font-semibold hover:text-white py-3 px-20 ml-5 border border-green-500 hover:border-transparent rounded"
                                                    onclick="increment()">
                                                    +
                                                </button>
                                            </h4>
                                            <h4 class="py-3">
                                                <button 
                                                    class="bg-blue-100 uppercase text-xl hover:bg-blue-500 text-gray-800 font-semibold hover:text-white py-4 px-10  border border-blue-500 hover:border-transparent rounded"
                                                    onclick="setDelay1()">
                                                    5 sec
                                                </button>
                                                <button 
                                                    class="bg-blue-100 uppercase text-xl hover:bg-blue-500 text-gray-800 font-semibold hover:text-white py-4 px-10 ml-5 border border-blue-500 hover:border-transparent rounded"
                                                    onclick="setDelay2()">
                                                    10 sec
                                                </button>
                                                <button
                                                    class="bg-blue-100 uppercase text-xl hover:bg-blue-500 text-gray-800 font-semibold hover:text-white py-4 px-10 ml-5 border border-blue-500 hover:border-transparent rounded"
                                                    onclick="setDelay3()">
                                                    20 sec
                                                </button>
                                            </h4>
                                        </div>
                                    </div>
                                </div>

                                <!-- Status Table-->
                                <div class="w-2/3 flex-shrink flex-wrap flex-row p-3">
                                    <div class="bg-white border border-gray-500 rounded shadow p-2" height="300rem">
                                        <div class="border-b border-gray-800 p-2">
                                            <h5 class="font-bold uppercase text-center text-xl text-gray-900">Production: 
                                                <a id="production_metric" class="font-bold text-2xl pl-2 items-center text-gray-800">0
                                                </a>
                                            </h5>
                                        </div>
                                        <div class="px-5 pb-3">
                                            <table class="table-fixed w-full text-center text-gray-800" >
                                                <thead>
                                                    <tr>
                                                        <th class="text-center text-xl uppercase py-2">Station Number</th>
                                                        <th class="text-center text-xl uppercase py-2">Status</th>
                                                        <th class="text-center text-xl uppercase py-2">Temperature</th>
                                                        <th class="text-center text-xl uppercase py-2">PASS / FAIL</th>
                                                    </tr>
                                                </thead>
                                        
                                                <tbody>
                                                    <tr>
                                                        <td class="border border-gray-500 text-2xl px-4 py-1">J-1
                                                        </td>
                                                        <td id="j1-status" class="border text-2xl uppercase border-gray-500 px-4 py-1"></td>
                                                        <td id="j1-temp" class="border text-2xl uppercase border-gray-500 px-4 py-1"></td>
                                                        <td id="j1-check" class="border text-2xl uppercase border-gray-500 px-4 py-1"></td>
                                                    </tr>
                                                    <tr>
                                                        <td class="border border-gray-500 text-2xl px-4 py-1">J-2
                                                        </td>
                                                        <td id="j2-status" class="border text-2xl uppercase border-gray-500 px-4 py-1"></td>
                                                        <td id="j2-temp" class="border text-2xl uppercase border-gray-500 px-4 py-1"></td>
                                                        <td id="j2-check" class="border text-2xl uppercase border-gray-500 px-4 py-1"></td>
                                                    </tr>
                                                    <tr>
                                                        <td class="border border-gray-500 text-2xl px-4 py-1">J-3
                                                        </td>
                                                        <td id="j3-status" class="border text-2xl uppercase border-gray-500 px-4 py-1"></td>
                                                        <td id="j3-temp" class="border text-2xl uppercase border-gray-500 px-4 py-1"></td>
                                                        <td id="j3-check" class="border text-2xl uppercase border-gray-500 px-4 py-1"></td>
                                                    </tr>
                                                    <tr>
                                                        <td class="border border-gray-500 text-2xl px-4 py-1">J-4
                                                        </td>
                                                        <td id="j4-status" class="border text-2xl uppercase border-gray-500 px-4 py-1"></td>
                                                        <td id="j4-temp" class="border text-2xl uppercase border-gray-500 px-4 py-1"></td>
                                                        <td id="j4-check" class="border text-2xl uppercase border-gray-500 px-4 py-1"></td>
                                                    </tr>
                                                    <tr>
                                                        <td class="border border-gray-500 text-2xl px-4 py-1">J-5
                                                        </td>
                                                        <td id="j5-status" class="border text-2xl uppercase border-gray-500 px-4 py-1"></td>
                                                        <td id="j5-temp" class="border text-2xl uppercase border-gray-500 px-4 py-1"></td>
                                                        <td id="j5-check" class="border text-2xl uppercase border-gray-500 px-4 py-1"></td>
                                                    </tr>
                                                    <tr>
                                                        <td class="border border-gray-500 text-2xl px-4 py-1">J-6
                                                        </td>
                                                        <td id="j6-status" class="border text-2xl uppercase border-gray-500 px-4 py-1"></td>
                                                        <td id="j6-temp" class="border text-2xl uppercase border-gray-500 px-4 py-1"></td>
                                                        <td id="j6-check" class="border text-2xl uppercase border-gray-500 px-4 py-1"></td>
                                                    </tr>
                                                    <tr>
                                                        <td class="border border-gray-500 text-2xl px-4 py-1">J-7
                                                        </td>
                                                        <td id="j7-status" class="border text-2xl uppercase border-gray-500 px-4 py-1"></td>
                                                        <td id="j7-temp" class="border text-2xl uppercase border-gray-500 px-4 py-1"></td>
                                                        <td id="j7-check" class="border text-2xl uppercase border-gray-500 px-4 py-1"></td>
                                                    </tr>
                                                    <tr>
                                                        <td class="border border-gray-500 text-2xl px-4 py-1">J-8
                                                        </td>
                                                        <td id="j8-status" class="border text-2xl uppercase border-gray-500 px-4 py-1"></td>
                                                        <td id="j8-temp" class="border text-2xl uppercase border-gray-500 px-4 py-1"></td>
                                                        <td id="j8-check" class="border text-2xl uppercase border-gray-500 px-4 py-1"></td>
                                                    </tr>
                                                    
                                        
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- Turret Guage-->
                                <div class="w-1/3 flex-shrink flex-wrap flex-row p-3">
                                    <div class="bg-white border border-gray-500 rounded shadow p-2">
                                        <div class="border-b border-gray-800 p-3">
                                            <h5 class="font-bold uppercase text-center text-gray-900">Turret Position</h5>
                                        </div>
                                        <div class="gauge w-5/3 py-5 align-middle text-center">
                                            <canvas height="330rem" width="500rem" id="canvas-id"></canvas>
                                        </div>
                                    </div>
                                </div>

                            </div>
                        </div>
                        <label for="carousel-2" class="next control-1 w-10 h-10 mb-5 md:mr-5 absolute cursor-pointer hidden text-3xl font-bold opacity-50 text-black rounded-full bg-gray-600 hover:opacity-100 leading-tight text-center z-10 inset-y-0 right-0 my-auto">›</label>
                    </div>

                    <!-- Temperature Trend Slide - 2 -->
                    <div class="carousel-inner relative overflow-hidden w-full">
                        <input class="carousel-open" type="radio" id="carousel-2" name="carousel" aria-hidden="true" hidden="">
                        <div class="carousel-item absolute bg-gray-100 border overflow-y-auto border-gray-800 rounded shadow" style="height:92vh;">
                            <div class="flex flex-wrap w-full text-center">


                                <!-- Temprature Variation Graph-->
                                <div class="w-full p-3 pt-5">
                                    <div class="bg-white border border-gray-500 rounded shadow p-2">
                                        <div class="border-b border-gray-800 p-3">
                                             <h5 class="font-bold uppercase text-center text-gray-900">Thermal Profile</h5>
                                        </div>
                                        <div class="p-5"> 
                                            <canvas id="temperature_graph" class="chartjs" height="90rem"></canvas> 
                                        </div>
                                    </div>
                                </div>

                                <!-- Temperature Guage-->
                                <div class="flex-shrink flex-wrap flex-row p-3">
                                    <div class="bg-white border border-gray-500 rounded shadow p-2">
                                        <div class="border-b border-gray-800 p-3">
                                            <h5 class="font-bold uppercase text-center text-gray-900">Temperature Guage</h5>
                                        </div>
                                        <div class="gauge pl-8 py-3 align-middle text-center">
                                            <canvas height="1000rem" width="180rem" id="canvas2-id"></canvas>
                                        </div>
                                    </div>
                                </div>

                            </div>
                        </div>

                        <label for="carousel-1"
                            class="prev control-2 w-10 h-10 mb-5 md:ml-5 absolute cursor-pointer hidden text-3xl font-bold opacity-50 text-black rounded-full bg-gray-600 hover:opacity-100 leading-tight text-center z-10 inset-y-0 left-0 my-auto">‹</label>
                        <label for="carousel-3"
                            class="next control-2 w-10 h-10 mb-5 md:mr-5 absolute cursor-pointer hidden text-3xl font-bold opacity-50 text-black rounded-full bg-gray-600 hover:opacity-100 leading-tight text-center z-10 inset-y-0 right-0 my-auto">›</label>

                    </div>

                    <!-- Control Slide - 3 -->
                    <div class="carousel-inner relative overflow-hidden w-full">
                        <input class="carousel-open" type="radio" id="carousel-3" name="carousel" aria-hidden="true" hidden="">
                        <div class="carousel-item absolute bg-gray-100 border overflow-y-auto border-gray-800 rounded shadow"
                            style="height:92vh;">
                            <div class="flex flex-wrap w-full text-center">

                                

                                <!-- Trip Status Banner -->
                                <div class="w-full p-3">
                                    <div class="bg-white border border-gray-500 rounded shadow p-2">
                                        <div class="flex flex-row items-center">
                                            <div class="flex-shrink px-4">
                                                <div class="rounded p-3 bg-indigo-600"><i
                                                        class="fab fa-connectdevelop fa-pulse fa-2x fa-fw fa-inverse"></i>
                                                </div>
                                            </div>
                                            <div class="flex-1 text-right md:text-center">
                                                <h3 class="font-bold uppercase text-3xl p-3 text-gray-900">
                                                    STATUS
                                                </h3>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- Main Motor Trip Metric Card-->
                                <div class="w-full md:w-1/2 xl:w-1/2 p-3">
                                    <div class="bg-white border border-gray-500 rounded shadow p-2">
                                        <div class="flex flex-row items-center">
                                            <div class="flex-1 text-right md:text-center pr-3">
                                                <h5 class="font-bold uppercase text-3xl text-gray-900">MAIN MOTOR</h5>
                                            </div>
                                            <div class="flex-shrink p-3">
                                                <div class="rounded p-6 bg-red-600"></div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- Feeder Motor Trip Metric Card-->
                                <div class="w-full md:w-1/2 xl:w-1/2 p-3">
                                    <div class="bg-white border border-gray-500 rounded shadow p-2">
                                        <div class="flex flex-row items-center">
                                            <div class="flex-1 text-right md:text-center pr-3">
                                                <h5 class="font-bold uppercase text-3xl text-gray-900">Feeder MOTOR</h5>
                                            </div>
                                            <div class="flex-shrink p-3">
                                                <div class="rounded p-6 bg-red-600"></div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- Emergency Metric Card-->
                                <div class="w-full md:w-1/2 xl:w-1/2 p-3">
                                    <div class="bg-white border border-gray-500 rounded shadow p-2">
                                        <div class="flex flex-row items-center">
                                            <div class="flex-1 text-right md:text-center pr-3">
                                                <h5 class="font-bold uppercase text-3xl text-gray-900">Emergency</h5>
                                            </div>
                                            <div class="flex-shrink p-3">
                                                <div class="rounded p-6 bg-red-600"></div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- Safety Guard Metric Card-->
                                <div class="w-full md:w-1/2 xl:w-1/2 p-3">
                                    <div class="bg-white border border-gray-500 rounded shadow p-2">
                                        <div class="flex flex-row items-center">
                                            <div class="flex-1 text-right md:text-center pr-3">
                                                <h5 class="font-bold uppercase text-3xl text-gray-900">Safety Guard Open</h5>
                                            </div>
                                            <div class="flex-shrink p-3">
                                                <div class="rounded p-6 bg-red-600"></div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- System Overload Metric Card-->
                                <div class="w-full md:w-1/2 xl:w-1/2 p-3">
                                    <div class="bg-white border border-gray-500 rounded shadow p-2">
                                        <div class="flex flex-row items-center">
                                            <div class="flex-1 text-right md:text-center pr-3">
                                                <h5 class="font-bold uppercase text-3xl text-gray-900">System Overload</h5>
                                            </div>
                                            <div class="flex-shrink p-3">
                                                <div class="rounded p-6 bg-red-600"></div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                            </div>
                        </div>
                        <label for="carousel-2"
                            class="prev control-3 w-10 h-10 mb-5 md:ml-5 absolute cursor-pointer hidden text-3xl font-bold opacity-50 text-black rounded-full bg-gray-600 hover:opacity-100 leading-tight text-center z-10 inset-y-0 left-0 my-auto">‹</label>
                    </div>

                </div>
            </div>
        </div>
    </div>

    <!-- Turret Guage -->
    <script>
        var gauge = new RadialGauge({
                renderTo: 'canvas-id',
                minValue: 0,
                maxValue: 360,
                majorTicks: [
                    "J-8",
                    "J-7",
                    "J-6",
                    "J-5",
                    "J-4",
                    "J-3",
                    "J-2",
                    "J-1",
                    ""
                ],
                minorTicks: 0,
                ticksAngle: 360,
                startAngle: 0,
                strokeTicks: true,
                // highlights: true,
                highlights: [
                // { 
                //     from: -20, 
                //     to: 20, 
                //     color: 'lightblue' },
                // { 
                //     from: 70, 
                //     to: 110, 
                //     color: 'green' },
                // { 
                //     from: 160, 
                //     to: 200, 
                //     color: 'rgba(255,30,0,.25)' },
                // { 
                //     from: 250, 
                //     to: 290, 
                //     color: 'red'}
                ],
                colorPlate: "#222",
                colorMajorTicks: "#f5f5f5",
                colorMinorTicks: "#ddd",
                colorNumbers: "#ccc",
                colorNeedle: "rgba(240, 128, 128, 1)",
                colorNeedleEnd: "rgba(255, 160, 122, .9)",
                valueBox: false,
                valueTextShadow: false,
                colorCircleInner: "#fff",
                colorNeedleCircleOuter: "#ccc",
                needleCircleSize: 15,
                needleCircleOuter: true,
                animationRule: "linear",
                needleType: "line",
                needleStart: 75,
                needleEnd: 99,
                needleWidth: 5,
                borders: true,
                borderInnerWidth: 0,
                borderMiddleWidth: 0,
                borderOuterWidth: 10,
                colorBorderOuter: "#ccc",
                colorBorderOuterEnd: "#ccc",
                colorNeedleShadowDown: "#222",
                borderShadowWidth: 0,
                animationTarget: "plate",
                animationDuration: 500,
                title: "COIL ^",
                fontTitleSize: 19,
                colorTitle: "#f5f5f5",
                value: 90,
                animateOnInit: false
            }).draw();

        var index = 1;
        var value = 270
        var heating_time = 5000;

        setTimeout(() => { 
            value = value - (45* index);
            gauge.value = value;

            setInterval(function () {
                if(index>7){
                    index=0
                }

                index++;
                
                value = value - 45;
                gauge.value = value;

                document.getElementById("production_metric").innerText++

                console.log(index)
                if (index == 2) {
                    document.getElementById("j1-status").innerHTML = "Loaded";
                    document.getElementById("j2-status").innerHTML = "Load";
                    document.getElementById("j3-status").innerHTML = "Load";
                    document.getElementById("j4-status").innerHTML = "Load";
                    document.getElementById("j5-status").innerHTML = "Unload";
                    document.getElementById("j6-status").innerHTML = "Quenching";
                    document.getElementById("j7-status").innerHTML = "Hold";
                    document.getElementById("j8-status").innerHTML = "Heating";

                    document.getElementById("j3-temp").innerHTML = ""
                    document.getElementById("j3-check").innerHTML = "";

                    // Math.random() * (max - min) + min;
                    document.getElementById("j7-temp").innerHTML = Math.floor(Math.random() * 100) + 830;
                    if (document.getElementById("j7-temp").innerHTML < 850){
                        document.getElementById("j7-check").innerHTML = "FAIL";
                    } else if (document.getElementById("j7-temp").innerHTML > 900) {
                        document.getElementById("j7-check").innerHTML = "FAIL";
                    } else if (document.getElementById("j7-temp").innerHTML ) {
                        document.getElementById("j7-check").innerHTML = "PASS";   
                    }

                } else if (index == 3) {
                    document.getElementById("j1-status").innerHTML = "Heating";
                    document.getElementById("j2-status").innerHTML = "Loaded";
                    document.getElementById("j3-status").innerHTML = "Load";
                    document.getElementById("j4-status").innerHTML = "Load";
                    document.getElementById("j5-status").innerHTML = "Load";
                    document.getElementById("j6-status").innerHTML = "Unload";
                    document.getElementById("j7-status").innerHTML = "Quenching";
                    document.getElementById("j8-status").innerHTML = "Hold";

                    document.getElementById("j4-temp").innerHTML = ""
                    document.getElementById("j4-check").innerHTML = "";

                    document.getElementById("j8-temp").innerHTML = Math.floor(Math.random() * 100) + 830;
                    if (document.getElementById("j8-temp").innerHTML < 850) {
                        document.getElementById("j8-check").innerHTML = "FAIL";
                    } else if (document.getElementById("j8-temp").innerHTML > 900) {
                        document.getElementById("j8-check").innerHTML = "FAIL";
                    } else if (document.getElementById("j8-temp").innerHTML) {
                        document.getElementById("j8-check").innerHTML = "PASS";
                    }
                } else if (index == 4) {
                    document.getElementById("j1-status").innerHTML = "Hold";
                    document.getElementById("j2-status").innerHTML = "Heating";
                    document.getElementById("j3-status").innerHTML = "Loaded";
                    document.getElementById("j4-status").innerHTML = "Load";
                    document.getElementById("j5-status").innerHTML = "Load";
                    document.getElementById("j6-status").innerHTML = "Load";
                    document.getElementById("j7-status").innerHTML = "Unload";
                    document.getElementById("j8-status").innerHTML = "Quenching";

                    document.getElementById("j5-temp").innerHTML = ""
                    document.getElementById("j5-check").innerHTML = "";

                    document.getElementById("j1-temp").innerHTML = Math.floor(Math.random() * 100) + 830;
                    if (document.getElementById("j1-temp").innerHTML < 850) {
                        document.getElementById("j1-check").innerHTML = "FAIL";
                    } else if (document.getElementById("j1-temp").innerHTML > 900) {
                        document.getElementById("j1-check").innerHTML = "FAIL";
                    } else if (document.getElementById("j1-temp").innerHTML) {
                        document.getElementById("j1-check").innerHTML = "PASS";
                    }
                } else if (index == 5) {
                    document.getElementById("j1-status").innerHTML = "Quenching";
                    document.getElementById("j2-status").innerHTML = "Hold";
                    document.getElementById("j3-status").innerHTML = "Heating";
                    document.getElementById("j4-status").innerHTML = "Loaded";
                    document.getElementById("j5-status").innerHTML = "Load";
                    document.getElementById("j6-status").innerHTML = "Load";
                    document.getElementById("j7-status").innerHTML = "Load";
                    document.getElementById("j8-status").innerHTML = "Unload";

                    document.getElementById("j6-temp").innerHTML = ""
                    document.getElementById("j6-check").innerHTML = "";

                    document.getElementById("j2-temp").innerHTML = Math.floor(Math.random() * 100) + 830;
                    if (document.getElementById("j2-temp").innerHTML < 850) {
                        document.getElementById("j2-check").innerHTML = "FAIL";
                    } else if (document.getElementById("j2-temp").innerHTML > 900) {
                        document.getElementById("j2-check").innerHTML = "FAIL";
                    } else if (document.getElementById("j2-temp").innerHTML) {
                        document.getElementById("j2-check").innerHTML = "PASS";
                    }
                } else if (index == 6) {
                    document.getElementById("j1-status").innerHTML = "Unload";
                    document.getElementById("j2-status").innerHTML = "Quenching";
                    document.getElementById("j3-status").innerHTML = "Hold";
                    document.getElementById("j4-status").innerHTML = "Heating";
                    document.getElementById("j5-status").innerHTML = "Loaded";
                    document.getElementById("j6-status").innerHTML = "Load";
                    document.getElementById("j7-status").innerHTML = "Load";
                    document.getElementById("j8-status").innerHTML = "Load";

                    document.getElementById("j7-temp").innerHTML = ""
                    document.getElementById("j7-check").innerHTML = "";

                    document.getElementById("j3-temp").innerHTML = Math.floor(Math.random() * 100) + 830;
                    if (document.getElementById("j3-temp").innerHTML < 850) {
                        document.getElementById("j3-check").innerHTML = "FAIL";
                    } else if (document.getElementById("j3-temp").innerHTML > 900) {
                        document.getElementById("j3-check").innerHTML = "FAIL";
                    } else if (document.getElementById("j3-temp").innerHTML) {
                        document.getElementById("j3-check").innerHTML = "PASS";
                    }
                } else if (index == 7) {
                    document.getElementById("j1-status").innerHTML = "Load";
                    document.getElementById("j2-status").innerHTML = "Unload";
                    document.getElementById("j3-status").innerHTML = "Quenching";
                    document.getElementById("j4-status").innerHTML = "Hold";
                    document.getElementById("j5-status").innerHTML = "Heating";
                    document.getElementById("j6-status").innerHTML = "Loaded";
                    document.getElementById("j7-status").innerHTML = "Load";
                    document.getElementById("j8-status").innerHTML = "Load";

                    document.getElementById("j8-temp").innerHTML = ""
                    document.getElementById("j8-check").innerHTML = "";

                    document.getElementById("j4-temp").innerHTML = Math.floor(Math.random() * 100) + 830;
                    if (document.getElementById("j4-temp").innerHTML < 850) {
                        document.getElementById("j4-check").innerHTML = "FAIL";
                    } else if (document.getElementById("j4-temp").innerHTML > 900) {
                        document.getElementById("j4-check").innerHTML = "FAIL";
                    } else if (document.getElementById("j4-temp").innerHTML) {
                        document.getElementById("j4-check").innerHTML = "PASS";
                    }
                } else if (index == 8) {
                    document.getElementById("j1-status").innerHTML = "Load"
                    document.getElementById("j2-status").innerHTML = "Load";
                    document.getElementById("j3-status").innerHTML = "Unload";
                    document.getElementById("j4-status").innerHTML = "Quenching";
                    document.getElementById("j5-status").innerHTML = "Hold";
                    document.getElementById("j6-status").innerHTML = "Heating";
                    document.getElementById("j7-status").innerHTML = "Loaded";
                    document.getElementById("j8-status").innerHTML = "Load";

                    document.getElementById("j1-temp").innerHTML = ""
                    document.getElementById("j1-check").innerHTML = "";

                    document.getElementById("j5-temp").innerHTML = Math.floor(Math.random() * 100) + 830;
                    if (document.getElementById("j5-temp").innerHTML < 850) {
                        document.getElementById("j5-check").innerHTML = "FAIL";
                    } else if (document.getElementById("j5-temp").innerHTML > 900) {
                        document.getElementById("j5-check").innerHTML = "FAIL";
                    } else if (document.getElementById("j5-temp").innerHTML) {
                        document.getElementById("j5-check").innerHTML = "PASS";
                    }
                } else if (index == 1) {
                    document.getElementById("j1-status").innerHTML = "Load";
                    document.getElementById("j2-status").innerHTML = "Load"
                    document.getElementById("j3-status").innerHTML = "Load";
                    document.getElementById("j4-status").innerHTML = "Unload";
                    document.getElementById("j5-status").innerHTML = "Quenching";
                    document.getElementById("j6-status").innerHTML = "Hold";
                    document.getElementById("j7-status").innerHTML = "Heating";
                    document.getElementById("j8-status").innerHTML = "Loaded";

                    document.getElementById("j2-temp").innerHTML = ""
                    document.getElementById("j2-check").innerHTML = "";

                    document.getElementById("j6-temp").innerHTML = Math.floor(Math.random() * 100) + 830;
                    if (document.getElementById("j6-temp").innerHTML < 850) {
                        document.getElementById("j6-check").innerHTML = "FAIL";
                    } else if (document.getElementById("j6-temp").innerHTML > 900) {
                        document.getElementById("j6-check").innerHTML = "FAIL";
                    } else if (document.getElementById("j6-temp").innerHTML) {
                        document.getElementById("j6-check").innerHTML = "PASS";
                    }
                }
                
            }, heating_time);
        }, 1000);
        
    </script>

    <!-- Temperature Guage -->
    <script>

        var gauge2 = new LinearGauge({
                renderTo: 'canvas2-id',
                width: 1250,
                height: 200,
                units: "°C",
                minValue: 0,
                startAngle: 90,
                ticksAngle: 180,
                valueBox: true,
                maxValue: 220,
                majorTicks: [
                    "0",
                    "20",
                    "40",
                    "60",
                    "80",
                    "100",
                    "120",
                    "140",
                    "160",
                    "180",
                    "200",
                    "220"
                ],
                minorTicks: 2,
                strokeTicks: true,
                highlights: [
                    {
                        "from": 100,
                        "to": 220,
                        "color": "rgba(200, 50, 50, .75)"
                    }
                ],
                colorPlate: "#fff",
                borderShadowWidth: 0,
                borders: false,
                needleType: "arrow",
                needleWidth: 2,
                needleCircleSize: 7,
                needleCircleOuter: true,
                needleCircleInner: false,
                animationDuration: 1500,
                animationRule: "linear",
                barWidth: 15,
                value: 35
            }).draw();
    </script>

    <!-- Average Compression History graph -->
    <script>
        var temp_graphcanvas = document.getElementById("temperature_graph").getContext("2d");
        var temp_graphdata = {
            labels: [],
            datasets: [
                {
                    label: "Temperature",
                    yAxisID: 'A',
                    fill: false,
                    lineTension: 0.1,
                    backgroundColor: "yellow",
                    borderColor: "yellow",
                    pointBorderColor: "rgba(75,192,192,1)",
                    pointHoverRadius: 5,
                    pointHoverBackgroundColor: "rgba(75,192,192,1)",
                    pointHoverBorderColor: "rgba(220,220,220,1)",
                    pointHoverBorderWidth: 2,
                    pointRadius: 5,
                    pointHitRadius: 10,
                    data: [],
                }
            ],
        };
        var temp_graphoptions = {
            responsive: true,
            showTooltips: true,
            showLines: true,
            scales: {
                yAxes: [{
                    scaleLabel: {
                        display: true,
                        fontSize: 25,
                        labelString: 'Temperature (°C)'
                    },
                    id: 'A',
                    type: 'linear',
                    position: 'left',
                    ticks: {
                        beginAtZero: true,
                        fontSize: 15,
                        max: 250
                    }
                },],
                xAxes: [{
                    type: 'time',
                    //display: false,
                    time: {
                        displayFormats: {
                            millisecond: 'YYYY-MM-DDTHH:mm:ss.SSSSSSSSSZ'
                        }
                    }
                }],
            },
            plugins: {
                zoom: {
                    // Container for pan options
                    pan: {
                        // Boolean to enable panning
                        enabled: true,

                        // Panning directions. Remove the appropriate direction to disable
                        // Eg. 'y' would only allow panning in the y direction
                        // A function that is called as the user is panning and returns the
                        // available directions can also be used:
                        //   mode: function({ chart }) {
                        //     return 'xy';
                        //   },
                        mode: 'x',

                        // On category scale, factor of pan velocity
                        speed: 20,

                        // Minimal pan distance required before actually applying pan
                        threshold: 10,

                    },

                    // Container for zoom options
                    zoom: {
                        // Boolean to enable zooming
                        enabled: true,

                        // Zooming directions. Remove the appropriate direction to disable 
                        // Eg. 'y' would only allow zooming in the y direction
                        mode: 'x',

                        // Speed of zoom via mouse wheel
                        // (percentage of zoom on a wheel event)
                        speed: 0.1,

                        // On category scale, minimal zoom level before actually applying zoom
                        sensitivity: 3,
                    }
                }
            },
            legend: {
                display: true,
                position: 'bottom',
                labels: {
                    fontSize: 20,

                }
            },
        };
        var temp_compression_graph = Chart.Line(temp_graphcanvas, {
            data: temp_graphdata,
            options: temp_graphoptions,
        });

    </script>

    <!-- Time -->
    <script>
        time = new Date().toLocaleString(undefined, { dateStyle: 'medium', timeStyle: 'medium', hour12: true, timeZone: 'Asia/Kolkata' });
        setInterval(() => {
            document.getElementById("time").innerHTML = new Date().toLocaleString(undefined, { dateStyle: 'medium', timeStyle: 'medium', hour12: true, timeZone: 'Asia/Kolkata' });
            // document.getElementById("feeder_activity_metric").innerHTML = time;
            //  document.getElementById("machine_activity_metric").innerHTML = time;
        }, 1000);
    </script>

    <!-- PAYLOAD API fetch -->
    <script>
        async function fetchpayload() {
            fetch(machineURL)
                .then((resp) => resp.json()) // Transform the data into json
                .then(function (data) {
                    // Here you get the data to modify as you please
                    var machine = data
                    console.log(machine)

                    document.getElementById("machine_status_metric").innerHTML = "ON";
                    document.getElementById("heating_time_metric").innerHTML = "100";

                    if (machine.status == "ON"){

                    }
                })
                .catch(function (error) {
                    // If there is any error you will catch them here
                    console.log("[ PAYLOAD FETCH ERROR ]")
                });
        };

        function startfetching() {
            setInterval(() => {
                document.getElementById("machine_status_metric").innerHTML = "ON";
                document.getElementById("modbus").innerHTML = "CONNECTED";
                // fetchpayload();
            }, 500);
        }
    </script>

    <!-- Set Delay -->
    <script>
        function increment(params) {
            document.getElementById("heating_time_metric").innerHTML++    
        }

        function decrement(params) {
            document.getElementById("heating_time_metric").innerHTML--
        }

        function setDelay1(params) {
            document.getElementById("heating_time_metric").innerHTML = parseInt(5);
        }

        function setDelay2(params) {
            document.getElementById("heating_time_metric").innerHTML = parseInt(10);
        }

        function setDelay3(params) {
            document.getElementById("heating_time_metric").innerHTML = parseInt(20);
        }
    </script>

    <!-- Controls -->
    <script>
        async function Start() {
            let submiturl = `${seturl}/start/0`
            await fetch(submiturl)
                .then(console.log(`[ Machine Started ]`))       
                .catch(console.error);
        }

        async function Delay() {
            var delay = parseInt(document.getElementById("heating_time_metric").innerText);
            console.log(delay)
            let submiturl = `${seturl}/delay/${delay}`
            await fetch(submiturl)
                .then(console.log(`[ Delay set to ${delay}]`))
                .then( setTimeout(() => { Start() }, 1000))
                .catch(console.error);
        }
        
        async function Stop() {
            let submiturl = `${seturl}/stop/1`
            await fetch(submiturl)
                .then(console.log("[ Machine Stopped ] "))
                .catch(console.error);
        }
        
        async function Home() {
            let submiturl = `${seturl}/home/1`
            await fetch(submiturl)
                .then(console.log("[ Machine to Home ] "))
                .catch(console.error);
        }

    </script>

    <!-- Keep app at fullscreen -->
    <script>
        // addEventListener("click", function () {
        //     if (window.innerHeight == screen.height) {
        //         // browser is fullscreen
        //     }
        //     else {
        //         var el = document.documentElement,
        //             rfs = el.requestFullscreen
        //                 || el.webkitRequestFullScreen
        //                 || el.mozRequestFullScreen
        //                 || el.msRequestFullscreen;
        //         rfs.call(el);
        //     }
        // });
    </script>

    <!-- Prevent Right Click -->
    <script>
        document.addEventListener('contextmenu', event => event.preventDefault());
    </script>

    <!-- Logout  -->
    <script>
        async function logout() {
            location.href = "/"
        }
    </script>

</body>

</html>